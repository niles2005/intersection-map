!function(t){var i={};function n(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=i,n.d=function(t,i,e){n.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,i){if(1&i&&(t=n(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var a in t)n.d(e,a,function(i){return t[i]}.bind(null,a));return e},n.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},n.p="",n(n.s=6)}([function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(t,i){this._data=t,this._intersection=i}return t.prototype.drawBounds=function(t){this._bounds&&(t.strokeStyle="blue",t.lineWidth=2,t.strokeRect(this._bounds.minX,this._bounds.minY,this._bounds.width,this._bounds.height))},t.prototype.setFocusPoint=function(t,i){},t.prototype.containPoint=function(t,i){if(this._bounds)return this._bounds.containPoint(t,i)},t.prototype.initGui=function(){},t.prototype.destroyGui=function(){this._gui&&(this._gui.destroy(),this._gui=null)},t}();i.Graph=e},function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(t,i,n,e){this.init(t,i,n,e)}return t.prototype.init=function(t,i,n,e){void 0===t?this.setToNull():(t<n?(this._minx=t,this._maxx=n):(this._minx=n,this._maxx=t),i<e?(this._miny=i,this._maxy=e):(this._miny=e,this._maxy=i))},t.prototype.setToNull=function(){this._minx=0,this._miny=0,this._maxx=-1,this._maxy=-1},t.prototype.isNull=function(){return this._maxx<this._minx},Object.defineProperty(t.prototype,"width",{get:function(){return this.isNull()?0:this._maxx-this._minx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.isNull()?0:this._maxy-this._miny},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxX",{get:function(){return this._maxx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minX",{get:function(){return this._minx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxY",{get:function(){return this._maxy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minY",{get:function(){return this._miny},enumerable:!0,configurable:!0}),t.prototype.getCenterX=function(){return(this._minx+this._maxx)/2},t.prototype.getCenterY=function(){return(this._miny+this._maxy)/2},t.prototype.expandBy=function(t,i){this.isNull()||(this._minx-=t,this._miny-=i,this._maxx+=t,this._maxy+=i,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull())},t.prototype.expandToIncludePoint=function(t,i){this.isNull()?(this._minx=t,this._miny=i,this._maxx=t,this._maxy=i):(t<this._minx&&(this._minx=t),i<this._miny&&(this._miny=i),t>this._maxx&&(this._maxx=t),i>this._maxy&&(this._maxy=i))},t.prototype.expandToIncludeBounds=function(t){this.isNull()?(this._minx=t._minx,this._miny=t._miny,this._maxx=t._maxx,this._maxy=t._maxy):(t._minx<this._minx&&(this._minx=t._minx),t._miny<this._miny&&(this._miny=t._miny),t._maxx>this._maxx&&(this._maxx=t._maxx),t._maxy>this._maxy&&(this._maxy=t._maxy))},t.prototype.translate=function(t,i){this.isNull()||this.init(this._minx+t,this._miny+i,this._maxx+t,this._maxy+i)},t.prototype.scale=function(t,i){this._minx*=t,this._miny*=i,this._maxx*=t,this._maxy*=i},t.prototype.rotate=function(t){var i=this._minx*Math.cos(t)-this._miny*Math.sin(t),n=this._miny*Math.cos(t)+this._minx*Math.sin(t),e=this._maxx*Math.cos(t)-this._maxy*Math.sin(t),a=this._maxy*Math.cos(t)+this._maxx*Math.sin(t),o=this._minx*Math.cos(t)-this._maxy*Math.sin(t),s=this._maxy*Math.cos(t)+this._minx*Math.sin(t),r=this._maxx*Math.cos(t)-this._miny*Math.sin(t),h=this._miny*Math.cos(t)+this._maxx*Math.sin(t);this._minx=Math.min(i,e,o,r),this._maxx=Math.max(i,e,o,r),this._miny=Math.min(n,a,s,h),this._maxy=Math.max(n,a,s,h)},t.prototype.intersectBounds=function(t){return!this.isNull()&&!t.isNull()&&(t._minx<=this._maxx&&t._maxx>=this._minx&&t._miny<=this._maxy&&t._maxy>=this._miny)},t.prototype.intersectPoint=function(t,i){return t<=this._maxx&&t>=this._minx&&i<=this._maxy&&i>=this._miny},t.prototype.intersectRect=function(t,i,n,e){return this._minx<=n&&this._maxx>=t&&this._miny<=e&&this._maxy>=i},t.prototype.intersection=function(i){if(this.isNull()||i.isNull()||!this.intersectBounds(i))return new t(0,0,-1,-1);var n=this._minx<=i._minx?i._minx:this._minx,e=this._miny<=i._miny?i._miny:this._miny;return new t(n,this._maxx>=i._maxx?i._maxx:this._maxx,e,this._maxy>=i._maxy?i._maxy:this._maxy)},t.prototype.overlapPoint=function(t,i){return this.intersectPoint(t,i)},t.prototype.overlapBounds=function(t){return this.intersectBounds(t)},t.prototype.containPoint=function(t,i){return t>=this._minx&&t<=this._maxx&&i>=this._miny&&i<=this._maxy},t.prototype.containBounds=function(t){return!this.isNull()&&!t.isNull()&&(t._minx>=this._minx&&t._maxx<=this._maxx&&t._miny>=this._miny&&t._maxy<=this._maxy)},t.prototype.equals=function(t){return this.isNull()?t.isNull():this._maxx==t._maxx&&this._maxy==t._maxy&&this._minx==t._minx&&this._miny==t._miny},t.prototype.toString=function(){return"Bounds:("+this._minx+","+this._miny+" , "+this._maxx+","+this._maxy+")"},t}();i.Bounds=e},function(t,i,n){"use strict";var e,a=this&&this.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e._data.lineWidth=e._data.lineWidth||1,e._data.strokeStyle=e._data.strokeStyle||"yellow",e}return a(i,t),i.build=function(t,n){return new i(t,n)},i}(n(3).Line);i.LineYellowSolid=o},function(t,i,n){"use strict";var e,a=this&&this.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0});var o=n(0),s=n(1),r=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e._p1=i.p1,e._p2=i.p2,e.init(),e}return a(i,t),i.build=function(t,n){return new i(t,n)},i.prototype.init=function(){this._bounds=new s.Bounds,this._bounds.expandToIncludePoint(this._p1.x,this._p1.y),this._bounds.expandToIncludePoint(this._p2.x,this._p2.y),this._bounds.expandBy(2,2)},i.prototype.draw=function(t){t.save(),t.lineWidth=this._data.lineWidth||1,t.strokeStyle=this._data.strokeStyle||"white",t.beginPath(),t.moveTo(this._p1.x,this._p1.y),t.lineTo(this._p2.x,this._p2.y),t.lineCap="butt",t.stroke(),t.restore()},i.prototype.initGui=function(){var t=this;this._gui=new dat.GUI;var i={x1:this._data.p1.x,y1:this._data.p1.y,x2:this._data.p2.x,y2:this._data.p2.y};function n(){if(t._data.p1.x=i.x1,t._data.p1.y=i.y1,t._data.p2.x=i.x2,t._data.p2.y=i.y2,t._data.strokeStyle&&(t._data.lineWidth=i.strokeStyle),t._data.lineWidth&&(t._data.lineWidth=i.lineWidth),i.dash){var n=i.dash.split(",");t._data.dash=n.map(function(t){return parseFloat(t)})}t.init(),t._intersection.repaint()}this._data.strokeStyle&&(i.strokeStyle=this._data.strokeStyle),this._data.lineWidth&&(i.lineWidth=this._data.lineWidth),this._data.dash&&(i.dash=this._data.dash.join(",")),this._gui.add(i,"x1").onFinishChange(n),this._gui.add(i,"y1").onFinishChange(n),this._gui.add(i,"x2").onFinishChange(n),this._gui.add(i,"y2").onFinishChange(n),this._data.dash&&this._gui.add(i,"dash").name("虚线设置").onFinishChange(n),this._gui.add(i,"strokeStyle").name("画笔样式").onFinishChange(n),this._gui.add(i,"lineWidth").name("画笔宽度").onFinishChange(n)},i}(o.Graph);i.Line=r},function(t,i,n){"use strict";var e,a=this&&this.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e._data.lineWidth=e._data.lineWidth||1,e._data.strokeStyle=e._data.strokeStyle||"white",e}return a(i,t),i.build=function(t,n){return new i(t,n)},i}(n(3).Line);i.LineWhiteSolid=o},function(t,i,n){"use strict";var e,a=this&&this.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e._px=i.px,e._data.angle=e._data.angle||0,e._data.fillStyle=e._data.fillStyle||"black",e.init(),e}return a(i,t),i.prototype.init=function(){},i.prototype.initGui=function(){var t=this;this._gui=new dat.GUI;var i={x:this._data.px.x,y:this._data.px.y,angle:this._data.angle,fillStyle:this._data.fillStyle};function n(){t._data.px.x=i.x,t._data.px.y=i.y,t._data.angle=i.angle,t._data.fillStyle=i.fillStyle,t.init(),t._intersection.repaint()}this._gui.add(i,"x").onFinishChange(n),this._gui.add(i,"y").onFinishChange(n),this._gui.add(i,"angle").name("角度").onFinishChange(n),this._gui.add(i,"fillStyle").name("填充样式").onFinishChange(n)},i}(n(0).Graph);i.Pole=o},function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=n(7);window.data||console.error("can not find intersection data!");var a=document.getElementById("canvas"),o=new e.Intersection(a,window.data);a.addEventListener("click",function(t){o.mouseClick(t)},!0),a.addEventListener("mousemove",function(t){o.mouseMove(t)},!0),a.addEventListener("mousewheel",function(t){t.preventDefault(),t.stopPropagation(),o.mouseWheel(t)},!0),a.addEventListener("mousedown",function(t){var i=t.offsetX-o.origoX,n=t.offsetY-o.origoY,e=function(t){o.origoX=t.offsetX-i,o.origoY=t.offsetY-n,o.repaint()},a=function(t){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",e),document.addEventListener("mouseup",a)})},function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=n(8),a=n(9),o=n(10),s=n(11),r=n(12),h=n(13),_=n(2),u=n(4),l=n(14),d=n(15),p=n(16),c=n(17),f=n(18),y=n(19),x=n(20),m=n(21),g=function(){function t(t,i){this._graphs=[],this._origoX=0,this._origoY=0,this._globalScale=1,this._graphBuilder={"点":a.Point.build,"折线":m.Polyline.build,"白实线":u.LineWhiteSolid.build,"白虚线":d.LineWhiteDashed.build,"黄实线":_.LineYellowSolid.build,"黄虚线":l.LineYellowDashed.build,"斑马线":r.ZebraLine.build,"相交曲线":s.IntersectCurve.build,"曲线":p.Curve.build,"箭头":h.Arrow.build,"形状":o.Shape.build,"路牌柱":c.PoleBoard.build,"标志牌柱":f.PoleFlag.build,"标志牌":y.Flag.build,"红黄绿灯":y.Flag.buildRYG,"背景图":e.Background.build,"文字":x.Label.build},this._canvas=t,this._ctx=this._canvas.getContext("2d"),this.initGraphs(i.graphs)}return Object.defineProperty(t.prototype,"origoX",{get:function(){return this._origoX},set:function(t){this._origoX=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"origoY",{get:function(){return this._origoY},set:function(t){this._origoY=t},enumerable:!0,configurable:!0}),t.prototype.initGraphs=function(t){var i=this;t.forEach(function(t){var n=t.type,e=null,a=i._graphBuilder[n];a&&(e=a(t,i)),e&&i._graphs.push(e)})},t.prototype.mouseClick=function(t){var i=(t.offsetX-this._origoX)/this._globalScale,n=(t.offsetY-this._origoY)/this._globalScale;if(this._selectGraph&&this._selectGraph.containPoint(i,n));else{this._selectGraph&&(this._selectGraph.destroyGui(),this._selectGraph=null);for(var e=this._graphs.length-1;e>=0;e--)if(this._graphs[e].containPoint(i,n)){this._selectGraph=this._graphs[e],this._selectGraph.initGui();break}}return this.repaint(),"x: "+Math.round(i)+", y: "+Math.round(n)},t.prototype.mouseWheel=function(t){var i=1*(t.offsetX-this._origoX)/(this._canvas.clientWidth*this._globalScale),n=1*(t.offsetY-this._origoY)/(this._canvas.clientHeight*this._globalScale);-100===t.deltaY?this._globalScale*=1.1:100===t.deltaY&&(this._globalScale/=1.1),this._origoX=t.offsetX-i*(this._canvas.clientWidth*this._globalScale),this._origoY=t.offsetY-n*(this._canvas.clientHeight*this._globalScale),this.repaint()},t.prototype.mouseMove=function(t){},t.prototype.repaint=function(){var t=this;this._ctx.save(),this._ctx.clearRect(0,0,this._canvas.clientWidth,this._canvas.clientHeight),this._ctx.translate(this._origoX,this._origoY),this._ctx.scale(this._globalScale,this._globalScale),this._graphs.forEach(function(i){i.draw(t._ctx)}),this._selectGraph&&(this._selectGraph.draw(this._ctx),this._selectGraph.drawBounds(this._ctx)),this._mouseClickPoint&&this._mouseClickPoint.draw(this._ctx),this._ctx.restore()},t}();i.Intersection=g},function(t,i,n){"use strict";var e,a=this&&this.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e._bgImage=new Image,e._bgImage.src=i.src,e._bgImage.onload=function(){e._intersection.repaint()},e}return a(i,t),i.build=function(t,n){return new i(t,n)},i.prototype.draw=function(t){this._bgImage.width&&t.drawImage(this._bgImage,0,0)},i.prototype.drawSubImage=function(t,i,n,e,a){this._bgImage.width&&t.drawImage(this._bgImage,i,n,e,a,0,0,200,200)},i}(n(0).Graph);i.Background=o},function(t,i,n){"use strict";var e,a=this&&this.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e._x=i.x,e._y=i.y,e}return a(i,t),i.build=function(t,n){return new i(t,n)},Object.defineProperty(i.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),i.prototype.draw=function(t){t.beginPath(),t.arc(this._x,this._y,2,2*Math.PI,!1),t.fillStyle="red",t.fill()},i}(n(0).Graph);i.Point=o},function(t,i,n){"use strict";var e,a=this&&this.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function i(i,n){var e=t.call(this,i,n)||this;e._intersection=n;var a=i.points;if(a){e._points=a.split(",");for(var o=0;o<e._points.length;o++)e._points[o]=e._points[o].trim()}return e}return a(i,t),i.build=function(t,n){return new i(t,n)},i.prototype.draw=function(t){var i,n,e,a,o=!1;t.save(),t.beginPath();for(var s=0;s<this._points.length;s+=2)if("c"!==this._points[s][0])e=parseFloat(this._points[s]),a=parseFloat(this._points[s+1]),0===s?(t.beginPath(),t.moveTo(e,a)):o?(t.quadraticCurveTo(i,n,e,a),o=!1):t.lineTo(e,a);else{var r=this._points[s].substring(1);i=parseFloat(r),n=parseFloat(this._points[s+1]),o=!0}t.closePath(),this._data.fillStyle&&(t.fillStyle=this._data.fillStyle,t.fill()),this._data.strokeStyle&&(t.strokeStyle=this._data.strokeStyle,t.lineWith=this._data.lineWith||1,t.stroke()),t.restore()},i}(n(0).Graph);i.Shape=o},function(t,i,n){"use strict";var e,a=this&&this.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function i(i,n){var e=t.call(this,i,n)||this,a=i.points.split(",");return 8===a.length?(e._p1={x:parseFloat(a[0]),y:parseFloat(a[1])},e._p2={x:parseFloat(a[2]),y:parseFloat(a[3])},e._p3={x:parseFloat(a[4]),y:parseFloat(a[5])},e._p4={x:parseFloat(a[6]),y:parseFloat(a[7])},e._px=interscetion_line.intersect({start:e._p1,end:e._p2},{start:e._p3,end:e._p4})):10===a.length?(e._p1={x:parseFloat(a[0]),y:parseFloat(a[1])},e._p2={x:parseFloat(a[2]),y:parseFloat(a[3])},e._px={x:parseFloat(a[4]),y:parseFloat(a[5])},e._p3={x:parseFloat(a[6]),y:parseFloat(a[7])},e._p4={x:parseFloat(a[8]),y:parseFloat(a[9])}):console.log("points's length is not >=8"),e}return a(i,t),i.build=function(t,n){return new i(t,n)},i.prototype.setFocusPoint=function(t,i){this._px.x=t,this._px.y=i},i.prototype.draw=function(t){t.beginPath(),t.moveTo(this._p1.x,this._p1.y),t.lineTo(this._p2.x,this._p2.y),t.quadraticCurveTo(this._px.x,this._px.y,this._p3.x,this._p3.y),t.lineTo(this._p4.x,this._p4.y),t.strokeStyle="green",t.lineWidth=2,t.stroke()},i}(n(0).Graph);i.IntersectCurve=o},function(t,i,n){"use strict";var e,a=this&&this.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0});var o=n(0),s=n(1),r=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e._p1=i.p1,e._p2=i.p2,i.num=i.num||10,i.zebraWidth=i.zebraWidth||10,e.init(),e}return a(i,t),i.build=function(t,n){return new i(t,n)},i.prototype.init=function(){this._bounds=new s.Bounds;var t=Math.atan2(this._p2.y-this._p1.y,this._p2.x-this._p1.x),i=this._p1.x+this._data.zebraWidth*Math.cos(t-Math.PI/2),n=this._p1.y+this._data.zebraWidth*Math.sin(t-Math.PI/2),e=this._p1.x+this._data.zebraWidth*Math.cos(t+Math.PI/2),a=this._p1.y+this._data.zebraWidth*Math.sin(t+Math.PI/2);this._bounds.expandToIncludePoint(i,n),this._bounds.expandToIncludePoint(e,a);var o=this._p2.x+this._data.zebraWidth*Math.cos(t-Math.PI/2),r=this._p2.y+this._data.zebraWidth*Math.sin(t-Math.PI/2),h=this._p2.x+this._data.zebraWidth*Math.cos(t+Math.PI/2),_=this._p2.y+this._data.zebraWidth*Math.sin(t+Math.PI/2);this._bounds.expandToIncludePoint(o,r),this._bounds.expandToIncludePoint(h,_)},i.prototype.draw=function(t){t.save();var i=this._p1.x-this._p2.x,n=this._p1.y-this._p2.y,e=Math.atan2(this._p2.y-this._p1.y,this._p2.x-this._p1.x);t.lineWidth=2.8,t.strokeStyle=this._data.strokeStyle||"white";for(var a=0;a<this._data.num;a++){var o=a/this._data.num,s=this._p1.x-o*i,r=this._p1.y-o*n,h=s+this._data.zebraWidth*Math.cos(e-Math.PI/2),_=r+this._data.zebraWidth*Math.sin(e-Math.PI/2),u=s+this._data.zebraWidth*Math.cos(e+Math.PI/2),l=r+this._data.zebraWidth*Math.sin(e+Math.PI/2);t.beginPath(),t.moveTo(h,_),t.lineTo(u,l),t.lineCap="butt",t.stroke()}t.restore()},i.prototype.initGui=function(){var t=this;this._gui=new dat.GUI;var i={x1:this._data.p1.x,y1:this._data.p1.y,x2:this._data.p2.x,y2:this._data.p2.y,num:this._data.num,zebraWidth:this._data.zebraWidth};function n(){t._data.p1.x=i.x1,t._data.p1.y=i.y1,t._data.p2.x=i.x2,t._data.p2.y=i.y2,t._data.num=i.num,t._data.zebraWidth=i.zebraWidth,t.init(),t._intersection.repaint()}this._gui.add(i,"x1").onFinishChange(n),this._gui.add(i,"y1").onFinishChange(n),this._gui.add(i,"x2").onFinishChange(n),this._gui.add(i,"y2").onFinishChange(n),this._gui.add(i,"num").name("行数").onFinishChange(n),this._gui.add(i,"zebraWidth").name("宽度").onFinishChange(n)},i}(o.Graph);i.ZebraLine=r},function(t,i,n){"use strict";var e,a=this&&this.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0});var o=n(0),s=n(1),r=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e._points=[],e._data.angle=e._data.angle||0,e._data.fillStyle=e._data.fillStyle||"white",e.init(),e}return a(i,t),i.build=function(t,n){return new i(t,n)},i.prototype.init=function(){this._points=[];var t,n,e=i.arrowShapes[this._data.name].split(","),a=!1;this._bounds=new s.Bounds;for(var o=0;o<e.length;o+=2){var r=e[o],h=e[o+1];if("c"!==r[0]){var _=parseFloat(r),u=parseFloat(h);this._bounds.expandToIncludePoint(_,u),a?(this._points.push([t,n,_,u]),a=!1):this._points.push([_,u])}else r=r.substring(1),t=parseFloat(r),n=parseFloat(h),a=!0,this._bounds.expandToIncludePoint(t,n)}this._data.scale&&this._bounds.scale(this._data.scale,this._data.scale),this._data.angle||(this._data.angle=0),this._data.angle&&this._bounds.rotate(this._data.angle/180*Math.PI),this._data.px&&this._bounds.translate(this._data.px.x,this._data.px.y)},i.prototype._drawShape=function(t){t.beginPath();for(var i=0;i<this._points.length;i++){var n=this._points[i];0===i?t.moveTo(n[0],n[1]):4===n.length?t.quadraticCurveTo(n[0],n[1],n[2],n[3]):t.lineTo(n[0],n[1])}},i.prototype.draw=function(t){t.save(),this._data.px&&t.translate(this._data.px.x,this._data.px.y),t.rotate(this._data.angle/180*Math.PI),this._data.scale&&t.scale(this._data.scale,this._data.scale),t.fillStyle=this._data.fillStyle,this._drawShape(t),t.closePath(),t.fill(),t.restore()},i.prototype.initGui=function(){var t=this;this._gui=new dat.GUI;var i={name:this._data.name,x:this._data.px.x,y:this._data.px.y,angle:this._data.angle,scale:this._data.scale,fillStyle:this._data.fillStyle};function n(){t._data.name=i.name,t._data.px.x=i.x,t._data.px.y=i.y,t._data.angle=i.angle,t._data.scale=i.scale,t._data.fillStyle=i.fillStyle,t.init(),t._intersection.repaint()}this._gui.add(i,"name",{"直行":"direct","左转":"left","右转":"right","直行左转":"direct-left","直行右转":"direct-right"}).onFinishChange(n),this._gui.add(i,"x").onFinishChange(n),this._gui.add(i,"y").onFinishChange(n),this._gui.add(i,"angle").name("角度").onFinishChange(n),this._gui.add(i,"scale").name("比例").onFinishChange(n),this._gui.add(i,"fillStyle").name("填充样式").onFinishChange(n)},i.arrowShapes={direct:"0,52.4,-3.9,31.5,-1.4,31.5,-1.4,0,1.2,0,1.2,31.5,3.9,31.5",right:"-6.75,36,-3.15,49.9,-3.15,41.4,6.75,31.3,6.75,0,4.15,0,4.15,23.5,-3.15,30.2,-3.15,22.9",left:"6.75,36,3.15,49.9,3.15,41.4,-6.75,31.3,-6.75,0,-4.15,0,-4.15,23.5,3.15,30.2,3.15,22.9","direct-right":"3.9,52.4,7.9,31.6,5.3,31.5,5.4,0.2,2.6,0,2.7,3.5,-4.1,10.3,-4.4,3,-7.9,15.8,-4.3,29.5,-4.3,20.9,2.6,14,2.8,31.5,0,31.4,3.8,52.3","direct-left":"-3.9,52.4,-7.9,31.6,-5.3,31.5,-5.4,0.2,-2.6,0,-2.7,3.5,4.1,10.3,4.4,3,7.9,15.8,4.3,29.5,4.3,20.9,-2.6,14,-2.8,31.5,0,31.4,-3.8,52.3"},i}(o.Graph);i.Arrow=r},function(t,i,n){"use strict";var e,a=this&&this.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e._data.dash=e._data.dash||[25,50],e}return a(i,t),i.build=function(t,n){return new i(t,n)},i.prototype.draw=function(t){t.save(),t.beginPath(),t.moveTo(this._p1.x,this._p1.y),t.lineTo(this._p2.x,this._p2.y),t.lineCap="butt",t.setLineDash(this._data.dash),t.lineWidth=this._data.lineWidth,t.strokeStyle=this._data.strokeStyle,t.stroke(),t.restore()},i}(n(2).LineYellowSolid);i.LineYellowDashed=o},function(t,i,n){"use strict";var e,a=this&&this.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e._data.dash=e._data.dash||[25,50],e}return a(i,t),i.build=function(t,n){return new i(t,n)},i.prototype.draw=function(t){t.save(),t.beginPath(),t.moveTo(this._p1.x,this._p1.y),t.lineTo(this._p2.x,this._p2.y),t.lineCap="butt",t.setLineDash(this._data.dash),t.lineWidth=this._data.lineWidth,t.strokeStyle=this._data.strokeStyle,t.stroke(),t.restore()},i}(n(4).LineWhiteSolid);i.LineWhiteDashed=o},function(t,i,n){"use strict";var e,a=this&&this.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0});var o=n(0),s=n(1),r=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e._p1=i.p1,e._p2=i.p2,e._px=i.px,e._data.strokeStyle=e._data.strokeStyle||"white",e._data.lineWidth=e._data.lineWidth||1,e.init(),e}return a(i,t),i.build=function(t,n){return new i(t,n)},i.prototype.init=function(){this._bounds=new s.Bounds,this._bounds.expandToIncludePoint(this._p1.x,this._p1.y),this._bounds.expandToIncludePoint(this._px.x,this._px.y),this._bounds.expandToIncludePoint(this._p2.x,this._p2.y),this._bounds.expandBy(2,2)},i.prototype.setFocusPoint=function(t,i){this._px.x=t,this._px.y=i},i.prototype.draw=function(t){t.save(),t.beginPath(),t.moveTo(this._p1.x,this._p1.y),t.quadraticCurveTo(this._px.x,this._px.y,this._p2.x,this._p2.y),t.strokeStyle=this._data.strokeStyle,t.lineWidth=this._data.lineWidth,this._data.dash&&t.setLineDash(this._data.dash),t.stroke(),t.restore()},i.prototype.initGui=function(){var t=this;this._gui=new dat.GUI;var i={x1:this._data.p1.x,y1:this._data.p1.y,x2:this._data.p2.x,y2:this._data.p2.y,c1:this._data.px.x,c2:this._data.px.y,strokeStyle:this._data.strokeStyle,lineWidth:this._data.lineWidth};function n(){if(t._data.p1.x=i.x1,t._data.p1.y=i.y1,t._data.p2.x=i.x2,t._data.p2.y=i.y2,t._data.px.x=i.c1,t._data.px.y=i.c2,t._data.lineWidth=i.strokeStyle,t._data.lineWidth=i.lineWidth,i.dash){var n=i.dash.split(",");t._data.dash=n.map(function(t){return parseFloat(t)})}t.init(),t._intersection.repaint()}this._data.dash&&(i.dash=this._data.dash.join(",")),this._gui.add(i,"x1").onFinishChange(n),this._gui.add(i,"y1").onFinishChange(n),this._gui.add(i,"x2").onFinishChange(n),this._gui.add(i,"y2").onFinishChange(n),this._gui.add(i,"c1").name("控制点x").onFinishChange(n),this._gui.add(i,"c2").name("控制点y").onFinishChange(n),this._data.dash&&this._gui.add(i,"dash").name("虚线设置").onFinishChange(n),this._gui.add(i,"strokeStyle").name("画笔样式").onFinishChange(n),this._gui.add(i,"lineWidth").name("画笔宽度").onFinishChange(n)},i}(o.Graph);i.Curve=r},function(t,i,n){"use strict";var e,a=this&&this.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0});var o=n(1),s=function(t){function i(i,n){return t.call(this,i,n)||this}return a(i,t),i.build=function(t,n){return new i(t,n)},i.prototype.init=function(){this._bounds=new o.Bounds,this._bounds.expandToIncludePoint(-12,-12),this._bounds.expandToIncludePoint(12,12),this._px&&this._bounds.translate(this._px.x,this._px.y)},i.prototype.draw=function(t){t.save(),this._px&&t.translate(this._px.x,this._px.y),this._data.angle&&t.rotate(this._data.angle/180*Math.PI),this._data.scale&&t.scale(this._data.scale,this._data.scale),t.fillStyle=this._data.fillStyle||"black",t.beginPath(),t.ellipse(0,0,3,6,Math.PI/2,0,2*Math.PI),t.fillRect(-12,2.5,24,4),t.fill(),t.restore()},i}(n(5).Pole);i.PoleBoard=s},function(t,i,n){"use strict";var e,a=this&&this.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0});var o=n(1),s=function(t){function i(i,n){return t.call(this,i,n)||this}return a(i,t),i.build=function(t,n){return new i(t,n)},i.prototype.init=function(){this._bounds=new o.Bounds,this._bounds.expandToIncludePoint(-5,-5),this._bounds.expandToIncludePoint(5,5),this._px&&this._bounds.translate(this._px.x,this._px.y)},i.prototype.draw=function(t){t.save(),this._px&&t.translate(this._px.x,this._px.y),t.rotate(this._data.angle/180*Math.PI),t.fillStyle=this._data.fillStyle,t.beginPath(),t.fillRect(-5,-1.5,10,3),t.fill(),t.restore()},i}(n(5).Pole);i.PoleFlag=s},function(t,i,n){"use strict";var e,a=this&&this.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0});var o=n(0),s=n(1),r=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e._px=i.px,e._image=new Image,e._image.src=i.src,e._image.onload=function(){e.init()},e}return a(i,t),i.build=function(t,n){return new i(t,n)},i.buildRYG=function(t,n){return t.src="./images/ryg.png",new i(t,n)},i.prototype.init=function(){this._bounds=new s.Bounds;var t=this._image.width,i=this._image.height;this._bounds.expandToIncludePoint(-t/2,-i/2),this._bounds.expandToIncludePoint(t/2,i/2),this._data.scale&&(this._bounds.scale(this._data.scale,this._data.scale),this._data.angle=0),this._data.angle||(this._data.angle=0),this._data.angle&&this._bounds.rotate(this._data.angle/180*Math.PI),this._px&&this._bounds.translate(this._px.x,this._px.y),this._intersection.repaint()},i.prototype.draw=function(t){this._image.width&&(t.save(),this._px&&t.translate(this._px.x,this._px.y),this._data.angle&&t.rotate(this._data.angle/180*Math.PI),this._data.scale&&t.scale(this._data.scale,this._data.scale),t.translate(-this._image.width/2,-this._image.height/2),t.drawImage(this._image,0,0),t.restore())},i.prototype.initGui=function(){var t=this;this._gui=new dat.GUI;var i={x:this._data.px.x,y:this._data.px.y,angle:this._data.angle,scale:this._data.scale,src:this._data.src};function n(){t._data.px.x=i.x,t._data.px.y=i.y,t._data.angle=i.angle,t._data.scale=i.scale,t._data.src=i.src,t.init(),t._intersection.repaint()}this._gui.add(i,"x").onFinishChange(n),this._gui.add(i,"y").onFinishChange(n),this._gui.add(i,"angle").name("角度").onFinishChange(n),this._gui.add(i,"scale").name("比例").onFinishChange(n),this._gui.add(i,"src").name("图片").onFinishChange(n)},i}(o.Graph);i.Flag=r},function(t,i,n){"use strict";var e,a=this&&this.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0});var o=n(0),s=n(1),r=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e._px=i.px,e._data.orient=e._data.orient||0,e._data.fontSize=e._data.fontSize||25,e._data.fontName=e._data.fontName||"宋体",e._data.fillStyle=e._data.fillStyle||"black",e.init(),e}return a(i,t),i.build=function(t,n){return new i(t,n)},i.prototype.init=function(){this._font=this._data.fontSize+"px "+this._data.fontName;var t=this.getLabelSize(this._data.label,this._font);this._width=t[0],this._height=t[1],this._bounds=new s.Bounds,this._bounds.expandToIncludePoint(-this._width/2,-this._height/2),this._bounds.expandToIncludePoint(this._width/2,this._height/2),this._px&&this._bounds.translate(this._px.x,this._px.y),this._intersection.repaint()},i.prototype.draw=function(t){t.save(),this._px&&t.translate(this._px.x,this._px.y),t.font=this._font,t.fillStyle=this._data.fillStyle,t.fillText(this._data.label,-this._width/2,this._height/2),t.restore()},i.prototype.initGui=function(){var t=this;this._gui=new dat.GUI;var i={x:this._data.px.x,y:this._data.px.y,fontSize:this._data.fontSize,fontName:this._data.fontName,fillStyle:this._data.fillStyle,label:this._data.label};function n(){t._data.px.x=i.x,t._data.px.y=i.y,t._data.fontSize=i.fontSize,t._data.fontName=i.fontName,t._data.fillStyle=i.fillStyle,t._data.label=i.label,t.init(),t._intersection.repaint()}this._gui.add(i,"x").onFinishChange(n),this._gui.add(i,"y").onFinishChange(n),this._gui.add(i,"label").name("标题").onFinishChange(n),this._gui.add(i,"fontSize").name("字体大小").onFinishChange(n),this._gui.add(i,"fontName").name("字体名称").onFinishChange(n),this._gui.add(i,"fillStyle").name("填充样式").onFinishChange(n)},i.prototype.getLabelSize=function(t,i){var n=document.createElement("label");n.style.font=i,n.innerText=t,document.body.appendChild(n);var e=[n.offsetWidth,n.offsetHeight];return document.body.removeChild(n),e},i}(o.Graph);i.Label=r},function(t,i,n){"use strict";var e,a=this&&this.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function i(i,n){var e=t.call(this,i,n)||this;e._intersection=n;var a=i.points;if(a){e._points=a.split(",");for(var o=0;o<e._points.length;o++)e._points[o]=e._points[o].trim()}return e._data.strokeStyle=e._data.strokeStyle||"black",e._data.lineWith=e._data.lineWith||1,e}return a(i,t),i.build=function(t,n){return new i(t,n)},i.prototype.draw=function(t){var i,n,e,a,o=!1;t.save(),t.beginPath();for(var s=0;s<this._points.length;s+=2)if("c"!==this._points[s][0])e=parseFloat(this._points[s]),a=parseFloat(this._points[s+1]),0===s?(t.beginPath(),t.moveTo(e,a)):o?(t.quadraticCurveTo(i,n,e,a),o=!1):t.lineTo(e,a);else{var r=this._points[s].substring(1);i=parseFloat(r),n=parseFloat(this._points[s+1]),o=!0}t.strokeStyle=this._data.strokeStyle,t.lineWith=this._data.lineWith,t.stroke(),t.restore()},i}(n(0).Graph);i.Polyline=o}]);